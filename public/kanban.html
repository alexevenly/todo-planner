<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager - Kanban Board</title>
    <link rel="stylesheet" href="kanban.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <h1>üìã –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á</h1>
                <button id="import-csv-btn" class="btn btn-secondary">
                    üì§ –ò–º–ø–æ—Ä—Ç CSV
                </button>
            </div>
            <div class="header-right">
                <button id="add-column-btn" class="btn btn-primary">
                    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É
                </button>
                <a href="/" class="btn btn-outline">
                    üè† –ù–∞–∑–∞–¥ –∫ –∫–∞–ª–µ–Ω–¥–∞—Ä—é
                </a>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="kanban-board" id="kanban-board">
                <!-- Columns will be dynamically added here -->
            </div>
        </main>

        <!-- Task Modal -->
        <div id="task-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="modal-title">–î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏</h2>
                    <button class="close-btn" id="close-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="task-title">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                        <input type="text" id="task-title" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏">
                    </div>
                    <div class="form-group">
                        <label for="task-description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                        <textarea id="task-description" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="task-labels">–ú–µ—Ç–∫–∏:</label>
                        <div class="labels-dropdown-container">
                            <div class="labels-dropdown" id="labels-dropdown">
                                <div class="labels-dropdown-toggle" id="labels-dropdown-toggle">
                                    <span id="labels-selected-text">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–∫–∏...</span>
                                    <span class="dropdown-arrow">‚ñº</span>
                                </div>
                                <div class="labels-dropdown-menu" id="labels-dropdown-menu">
                                    <div class="labels-dropdown-search">
                                        <input type="text" id="label-search" placeholder="–ü–æ–∏—Å–∫ –∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –º–µ—Ç–∫–∏...">
                                        <button id="add-new-label-btn" class="btn btn-small">–î–æ–±–∞–≤–∏—Ç—å</button>
                                    </div>
                                    <div class="labels-dropdown-list" id="labels-dropdown-list"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="task-epic">–≠–ø–∏–∫:</label>
                        <select id="task-epic">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —ç–ø–∏–∫</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="task-parent">–†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞:</label>
                        <select id="task-parent">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –∑–∞–¥–∞—á—É</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="task-priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
                        <select id="task-priority">
                            <option value="low">–ù–∏–∑–∫–∏–π</option>
                            <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="task-due-date">–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</label>
                        <input type="date" id="task-due-date">
                    </div>
                    <div class="form-group">
                        <label>–ü–æ–¥–∑–∞–¥–∞—á–∏:</label>
                        <div id="subtasks-container">
                            <!-- Subtasks will be rendered here -->
                        </div>
                        <div class="add-subtask">
                            <input type="text" id="new-subtask" placeholder="–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∑–∞–¥–∞—á—É...">
                            <button id="add-subtask-btn" class="btn btn-small">–î–æ–±–∞–≤–∏—Ç—å</button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="save-task" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–¥–∞—á—É</button>
                    <button id="delete-task" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É</button>
                </div>
            </div>
        </div>

        <!-- Import Modal -->
        <div id="import-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö CSV</h2>
                    <button class="close-btn" id="close-import-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="csv-file">–í—ã–±–µ—Ä–∏—Ç–µ CSV —Ñ–∞–π–ª:</label>
                        <input type="file" id="csv-file" accept=".csv">
                    </div>
                    <div class="form-group">
                        <button id="import-data" class="btn btn-primary">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Column Modal -->
        <div id="column-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="column-modal-title">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É</h2>
                    <button class="close-btn" id="close-column-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="column-title">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏:</label>
                        <input type="text" id="column-title" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏">
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="save-column" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É</button>
                </div>
            </div>
        </div>

        <!-- Label Modal -->
        <div id="label-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –º–µ—Ç–∫—É</h2>
                    <button class="close-btn" id="close-label-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="label-name">–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç–∫–∏:</label>
                        <input type="text" id="label-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç–∫–∏">
                    </div>
                    <div class="form-group">
                        <label for="label-color">–¶–≤–µ—Ç –º–µ—Ç–∫–∏:</label>
                        <input type="color" id="label-color" value="#3498db">
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="save-label" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–µ—Ç–∫—É</button>
                </div>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div id="confirmation-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="confirmation-title">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ</h2>
                    <button class="close-btn" id="close-confirmation-modal">&times;</button>
                </div>
                <div class="modal-body">
                    <p id="confirmation-message">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ?</p>
                </div>
                <div class="modal-footer">
                    <button id="confirm-action" class="btn btn-primary">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                    <button id="cancel-action" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <!-- Hidden file input for CSV import -->
        <input type="file" id="csv-input" accept=".csv" style="display: none;">
    </div>

    <script src="import-csv.js"></script>
    <script src="kanban.js"></script>
</body>
</html>
